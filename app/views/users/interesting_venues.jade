extends ../layouts/main

block content
  h2 Place visited by 
    a(href='/user/profile/'+username) @#{username} 
    | within last #{days} days.
  hr

  if tweets.length <= 0
    .row
      .col-sm-12
        .alert.alert-danger
          strong Aw, Snap! &nbsp;
          | No places found
  else
    each tweet in tweets
      .row
        .col-sm-8.col-sm-offset-2
          .well.interesting-venues
            table
              tbody
                tr
                  td
                    .pull-right Name: &nbsp;
                  td #{tweet.place_name}
                if Object.keys(tweet.gplace).length === 0
                  tr
                    td &nbsp;
                    td
                      .alert.alert-danger(style='margin-bottom: 0px;') No details found for this place
                else
                  tr
                    td
                      .pull-right Categories: &nbsp;
                    td 
                      each type in tweet.gplace.types
                        span.label.label-success.type #{type}
                        | &nbsp;
                  tr
                    td
                     .pull-right Address: &nbsp;
                    td #{tweet.gplace.name}, #{tweet.gplace.formatted_address}
                      br
                      br
                      iframe.map(width='100%', height=250, frameborder=0, src='https://www.google.com/maps/embed/v1/place?key=#{api_key}&q=#{tweet.place_name_query}')
                  tr
                    td
                     .pull-right URL: &nbsp;
                    td
                      a.btn.btn-primary.btn-xs(href='#{tweet.gplace.website || tweet.gplace.url}', target='_blank') Visit page
                  tr
                    td
                     .pull-right Photos: &nbsp;
                    td
                      .row
                        if tweet.gplace.photo_urls.length <= 0
                          .col-sm-3
                            img(src='/images/no_img.jpg', width='100%')
                        else
                          each photo in tweet.gplace.photo_urls
                            .col-sm-4
                              img(src='#{photo}', width='100%')
                  if tweet.gplace.reviews
                    tr
                      td
                       .pull-right Reviews: &nbsp;
                      td 
                        if tweet.gplace.reviews
                          each review in tweet.gplace.reviews
                            div.alert.alert-info
                              small
                                i #{review.text}
                                br 
                                | &mdash; #{review.author_name}
